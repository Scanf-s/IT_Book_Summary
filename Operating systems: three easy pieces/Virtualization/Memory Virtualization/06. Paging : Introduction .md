## 용어 설명

**페이징 (Paging)**: 가상 주소 공간을 동일한 크기의 일정한 조각으로 분할하는 것을 말합니다.

**페이지 (Page)**: 각각 나뉘어진 가상 주소 공간의 고정 크기 단위입니다.

**페이지 프레임 (Page Frame)**: 물리 주소 공간의 고정 크기 슬롯 배열입니다. 하나의 페이지 프레임에는 하나의 페이지(가상 주소 공간의 페이지)를 저장할 수 있습니다.

## 간단한 예시
![image](https://github.com/user-attachments/assets/c02cf6ec-6d22-4ad5-b12c-86d63f4e235a)

총 크기가 64바이트(= 2⁶ 바이트)인 가상 주소 공간이 있습니다. 이 공간을 동일한 크기로 **16바이트(= 2⁴)씩** 잘라서 나누면, 총 **4개의 페이지**로 분할됩니다.

물리 메모리의 페이지 프레임 크기는 가상 주소 공간에서 분할한 페이지 크기와 같으므로, **16바이트씩** 크기를 가지는 프레임이 총 **8개** 있습니다. 이 경우 총 크기는 **128바이트(= 2⁷)**가 됩니다.
![image](https://github.com/user-attachments/assets/0c0cb3dc-ebb6-46c5-ace1-dc74eeb8f604)

## 페이징의 장점
- 유연하게 주소 공간을 사용할 수 있습니다.
- 빈 공간 관리를 단순하게 수행할 수 있습니다. 즉, 빈 공간 리스트에서 빈 공간을 할당받기만 하면 됩니다.

## 페이지 테이블

**페이지 테이블**: 가상 페이지(블록)와 물리 메모리 위치를 매핑해주는 **주소 변환 테이블**입니다.

- 페이지 테이블은 **프로세스마다 각각 존재**합니다.

## 페이지 테이블 예시
![image](https://github.com/user-attachments/assets/ae6d777d-49ee-4c65-8836-4624678a140c)

총 크기가 **64바이트**인 가상 주소 공간이 있다고 가정합니다. 가상 주소는 **6비트**로 표현되며, 이 공간을 **4개의 페이지**로 분할해야 한다면, **하나의 페이지 크기**는 **16바이트(= 2⁴)**입니다.

가상 주소 비트는 다음과 같이 나뉩니다:
- **VPN (Virtual Page Number)**: 2비트로 페이지 번호를 나타냅니다.
- **Offset**: 나머지 4비트로 페이지 내의 위치를 나타냅니다.

예를 들어, 가상 주소가 **21(이진수로 010101)**이라면:
- **VPN**: 01 (즉, 가상 페이지 1번)
- **Offset**: 0101 (즉, 페이지 내에서의 위치)

여기서 **VPN**은 물리 메모리의 페이지 프레임과 매핑됩니다. 예를 들어, VPN 1이 **111번 페이지 프레임**과 매핑되었다고 가정하면, 최종 **물리 주소**는 `1110101`이 됩니다. (즉, 물리 페이지 번호 111 뒤에 오프셋을 붙인 값이 됩니다.)
![image](https://github.com/user-attachments/assets/fa494779-7382-474a-ac63-fb6bcbf70733)

## 페이지 테이블의 저장 위치

**32비트 가상 주소 공간 체계**에서는 일반적으로 **페이지 크기**를 **4KB**로 사용합니다.
- **4KB(= 2¹²)**는 페이지 크기를 의미하며, **오프셋**으로 사용됩니다. 따라서 오프셋은 **12비트**이고, 나머지 **20비트**는 **VPN**입니다.
- 총 **2²⁰**개의 페이지가 존재하며, 이는 **1MB**의 메모리를 차지합니다. 즉, 페이지 테이블을 관리하기 위해 많은 메모리가 필요합니다.

페이지 테이블 항목(PTE)은 가상 주소와 물리 주소를 매핑하는 **하나의 행**을 의미합니다. 만약 **PTE 하나마다 4바이트**가 필요하다면, 각 페이지 테이블은 **4MB**의 메모리가 필요합니다. 즉, **하나의 프로세스마다 4MB**가 필요하며, **100개의 프로세스**가 동작할 경우 **400MB**가 필요하게 됩니다.

## PTE (Page Table Entry)
![image](https://github.com/user-attachments/assets/ca71e9e3-a2c4-4b58-8c5d-ef8e41e492a5)

**PTE**는 페이지 테이블 내의 각 항목입니다. 가상 페이지 번호를 **인덱스**로 사용하여 원하는 **PTE**로 이동하며, PTE에는 여러 가지 비트 정보가 포함되어 있습니다:

- **유효 비트 (Valid Bit)**: 특정 변환이 유효한지를 나타냅니다. 미사용 공간에 접근하려고 할 경우 **트랩**을 발생시켜 프로세스를 종료할 수 있습니다.
- **보호 비트 (Protection Bit)**: 읽기/쓰기/실행 권한을 나타내며, 허용되지 않은 접근 방법일 경우 트랩을 발생시킵니다.
- **프리셋 비트 (Preset Bit)**: 물리 메모리에 실제로 존재하는지 여부를 나타냅니다.
- **더티 비트 (Dirty Bit)**: 메모리에 반입된 이후 해당 페이지가 변경되었는지 여부를 나타냅니다.
- **참조 비트 (Reference Bit)**: 페이지가 자주 사용되는지를 나타내는 비트입니다.

